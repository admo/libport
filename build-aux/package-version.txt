package-version.m4
package-version.mk
package-version.txt

The traditional Autotools approach requires that the version string be
static (i.e., available at Autoconf time via AC_INIT).  This is very
painful, as to keep the version information up to date, autoconf must
be launched again, which in term should change config.h, resulting in
never-ending recompilation cycles, especially if you want to depend on
the actual revision!

So we try to work around this.

To hide our tricks from Autoconf and Automake, we define a fake static
version (UNDEFINED).

configure uses URBI_PACKAGE_VERSION to load the actual version
string from the file .version.  It will change $VERSION to get the
actual value (either obtained by `git describe' or by `.version'), and
it will also change the value of VERSION used in the Makefiles to be
dynamic (i.e., computed each time "make" is run).  In other words, we
no longer have to recreate configure and the Makefiles each time a
version changes.

URBI_PACKAGE_VERSION will also set @VERSION@ to some GNU Make commands
that will load the value of VERSION dynamically.

package-version.mk creates and maintains .version as up to date as
possible.  The target "make update-version" forces the update to the
most recent version.  You need to run "make" afterwards.

//				                            -*- C++ -*-

#ifndef LIBPORT_CSTDIO
# define LIBPORT_CSTDIO

# include <cstdio>
# include <string>
# include <sstream>

# include <libport/export.hh>
# include <libport/detect-win32.h>

# ifdef MSVC
#  include <io.h>
#  define snprintf _snprintf
#  define vsnprintf _vsnprintf

extern "C"
{
  inline
  int fileno(FILE* stream)
  {
    return _fileno(stream);
  }
}

# endif

namespace libport
{

  /// Convenience wrapper for C++.
  LIBPORT_API
  void perror(const std::string& s);

  /// Convenience wrapper for C++.
  LIBPORT_API
  void perror(const std::ostringstream& s);

  /// Portable for Windows.
  LIBPORT_API
  void perror(const char* s);

  /// Portable for Windows.
  LIBPORT_API
  const char* strerror(int errnum);

}

#endif // !LIBPORT_CSTDIO

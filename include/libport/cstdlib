// -*- c++ -*-
#ifndef LIBPORT_CSTDLIB
# define LIBPORT_CSTDLIB

# include <cstdlib>
# include <libport/compiler.hh>
# include <libport/export.hh>

# if defined WIN32
#  include <string>

extern "C"
{

  LIBPORT_API
  int
  setenv(const char* key, const char* value, int /* overwrite */)
  {
    // The windows version is a joke.
    return _putenv((std::string(key) + "=" + value).c_str());
  }

  LIBPORT_API
  int
  unsetenv(const char* key)
  {
    // The windows version is a BIG joke.
    // It looks like, to unset an environment variable under windows,
    // emptying it is sufficient. Which is pretty lame, since we thus
    // can't have a defined yet empty variable.
    return _putenv((std::string(key) + "=").c_str());
  }

}
# endif

#endif
